webpackJsonp([2,30],{2:function(e,t){"use strict";function i(e,t){for(var t=t-(e+"").length,i=0;i<t;i++)e="0"+e;return e}Object.defineProperty(t,"__esModule",{value:!0});var a=/([yMdhsm])(\1*)/g,o="yyyy-MM-dd";t.default={getQueryStringByName:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t),a="";return null!=i&&(a=i[2]),t=null,i=null,null==a||""==a||"undefined"==a?"":a},formatDate:{format:function(e,t){return t=t||o,t.replace(a,function(t){switch(t.charAt(0)){case"y":return i(e.getFullYear(),t.length);case"M":return i(e.getMonth()+1,t.length);case"d":return i(e.getDate(),t.length);case"w":return e.getDay()+1;case"h":return i(e.getHours(),t.length);case"m":return i(e.getMinutes(),t.length);case"s":return i(e.getSeconds(),t.length)}})},parse:function(e,t){var i=t.match(a),o=e.match(/(\d)+/g);if(i.length==o.length){for(var n=new Date(1970,0,1),l=0;l<i.length;l++){var r=parseInt(o[l]),s=i[l];switch(s.charAt(0)){case"y":n.setFullYear(r);break;case"M":n.setMonth(r-1);break;case"d":n.setDate(r);break;case"h":n.setHours(r);break;case"m":n.setMinutes(r);break;case"s":n.setSeconds(r)}}return n}return null}}}},10:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(3),n=a(o),l="/oss/key";t.default=n.default.get(l).then(function(e){console.log(e);var t=e.code,i=e.data;if(200==t)return new OSS.Wrapper({region:"oss-cn-qingdao",accessKeyId:i.cnt.AccessKeyId,accessKeySecret:i.cnt.AccessKeySecret,stsToken:i.cnt.SecurityToken,bucket:"accessorygx"})}).catch(function(e){console.log(e)})},45:function(e,t){var i=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=i)},92:function(e,t,i){e.exports={default:i(94),__esModule:!0}},94:function(e,t,i){var a=i(45),o=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},245:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(92),n=a(o),l=i(2),r=(a(l),i(7)),s=a(r),c=i(3),d=a(c),p=i(8),u=a(p),f=i(10),m=a(f);t.default={data:function(){return{activeName:"first",filters:{name:""},dialogImageUrl:"",dialogVisible:!1,filelist:[],filelist1:[],visible2:!1,users:[],pic:[],picContent:[],total:0,page:1,listLoading:!1,editFormVisible:!1,editFormTtile:"编辑",editForm:{id:0,pic:"",content:"",note:"",status:""},form:{id:0},editLoading:!1,btnEditText:"提 交",editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]}}},methods:{test:function(){console.log("12144141 test")},formatSex:function(e,t){return 1==e.sex?"男":0==e.sex?"女":"未知"},adddetail:function(){console.log("1213133")},addtitle:function(){this.$prompt("请输入添加的文字","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value}).catch(function(){})},handleClick:function(){},handleCurrentChange:function(e){this.page=e,this.getUsers()},handleRemove:function(e,t){for(var i=0,a=this.picContent.length;i<a;i++)this.picContent[i]==e.url&&(this.picContent.splice(i,1),i--)},handleRemoveBanner:function(e,t){for(var i=0,a=this.pic.length;i<a;i++)this.pic[i]==e.url&&(this.pic.splice(i,1),i--)},handlePictureCardPreview:function(e){console.log(e),console.log("qianzhi"),this.dialogImageUrl=e.url,this.dialogVisible=!0},getUpstr:function(){console.log("chenggongshi ")},handlechange:function(){console.log("handlechange ")},handleBeforeup:function(){console.log("handleBeforeup ")},getUsers:function(){var e=this,t=this.$route.params;this.editForm.id=t.id;var i={id:t.id};this.listLoading=!0,s.default.start(),d.default.get(u.default.api.goods.goodsdetail,i).then(function(t){e.listLoading=!1,s.default.done();var i=t.message,a=t.code,o=t.data;if(200!==a)e.$notify({title:"错误",message:i,type:"error"});else{e.form=o.cnt,e.form.is_rebate+="",e.form.pic=(0,n.default)(e.form.pic);for(var l in e.editForm)e.editForm[l]=e.form[l]+"";e.filelist1=[],e.filelist=[],e.form.pic&&(e.pic=e.form.pic instanceof Array?e.form.pic:JSON.parse(e.form.pic),e.pic=e.pic?e.pic:[],e.pic.forEach(function(t){e.filelist1.push({name:"img",url:t})}))}})},handleRequestOssBanner:function(e){var t=this,i=e.file;m.default.then(function(e){e.multipartUpload(i.name,i).then(function(e){t.pic.push(e.res.requestUrls[0].split("?")[0]),t.filelist1=[],t.pic.forEach(function(e,i){t.filelist1.push({name:i,url:e})})}).catch(function(e){console.log(e)})})},handleRequestOss:function(e){var t=this,i=e.file;m.default.then(function(e){e.multipartUpload(i.name,i).then(function(e){t.picContent.push(e.res.requestUrls[0].split("?")[0]),t.filelist1=[],t.picContent.forEach(function(e,i){t.filelist1.push({name:i,url:e})})}).catch(function(e){console.log(e)})})},handleDel:function(e){var t=this;this.$confirm("确认删除该记录吗?","提示",{}).then(function(){t.listLoading=!0,s.default.start();var i={id:e.id};removeUser(i).then(function(e){t.listLoading=!1,s.default.done(),t.$notify({title:"成功",message:"删除成功",type:"success"}),t.getUsers()})}).catch(function(){})},handleEdit:function(e){this.$router.push("/goods-detail-edit")},editSubmit:function(){var e=this,t=this;t.$refs.editForm.validate(function(i){i&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.editLoading=!0,s.default.start(),t.btnEditText="提交中";var i=t.editForm;i.content=imageContent.innerHTML,i.pic=(0,n.default)(t.pic),d.default.post(u.default.api.goods.goodsdetailadd,i).then(function(i){var a=i.message,o=i.code;i.data;t.editLoading=!1,s.default.done(),t.btnEditText="提 交",200!==o?e.$notify({title:"错误",message:a,type:"error"}):(t.$notify({title:"成功",message:"提交成功",type:"success"}),t.editFormVisible=!1,t.$router.replace("/goods-detail"))})})})},handleAdd:function(){this.editFormVisible=!0,this.editFormTtile="新增",this.editForm.id=0,this.editForm.name="",this.editForm.sex=1,this.editForm.age=0,this.editForm.birth="",this.editForm.addr=""}},mounted:function(){this.getUsers()}}},514:function(e,t,i){t=e.exports=i(11)(),t.push([e.id,'.el-card__header[data-v-7079e4fe]{background-color:#e4e4e4}.clearfix[data-v-7079e4fe]:after,.clearfix[data-v-7079e4fe]:before{display:table;content:""}.clearfix[data-v-7079e4fe]:after{clear:both}.phoneBg[data-v-7079e4fe]{background:url('+i(584)+") no-repeat 0 0;background-size:contain}.el-carousel__item h3[data-v-7079e4fe]{color:#475669;font-size:18px;opacity:.75;line-height:300px;margin:0}.el-carousel__item[data-v-7079e4fe]:nth-child(2n){background-color:#99a9bf}.el-carousel__item[data-v-7079e4fe]:nth-child(odd){background-color:#d3dce6}","",{version:3,sources:["F:/zhb/single/yx/src/pages/goods/goods-detail-edit.vue"],names:[],mappings:"AACA,kCACI,wBAAyB,CAC5B,AACD,mEAEI,cAAe,AACf,UAAY,CACf,AACD,iCACI,UAAW,CACd,AACD,0BACI,uDAAyD,AAEzD,uBAAyB,CAC5B,AACD,uCACI,cAAe,AACf,eAAgB,AAChB,YAAc,AACd,kBAAmB,AACnB,QAAU,CACb,AACD,kDACI,wBAA0B,CAC7B,AACD,mDACI,wBAA0B,CAC7B",file:"goods-detail-edit.vue",sourcesContent:["\n.el-card__header[data-v-7079e4fe] {\r\n    background-color: #E4E4E4\n}\n.clearfix[data-v-7079e4fe]:before,\r\n.clearfix[data-v-7079e4fe]:after {\r\n    display: table;\r\n    content: \"\";\n}\n.clearfix[data-v-7079e4fe]:after {\r\n    clear: both\n}\n.phoneBg[data-v-7079e4fe] {\r\n    background: url('../../assets/iphone.png') no-repeat 0 0;\r\n\r\n    background-size: contain;\n}\n.el-carousel__item h3[data-v-7079e4fe] {\r\n    color: #475669;\r\n    font-size: 18px;\r\n    opacity: 0.75;\r\n    line-height: 300px;\r\n    margin: 0;\n}\n.el-carousel__item[data-v-7079e4fe]:nth-child(2n) {\r\n    background-color: #99a9bf;\n}\n.el-carousel__item[data-v-7079e4fe]:nth-child(2n+1) {\r\n    background-color: #d3dce6;\n}\r\n"],sourceRoot:""}])},568:function(e,t,i){var a=i(514);"string"==typeof a&&(a=[[e.id,a,""]]);i(12)(a,{});a.locals&&(e.exports=a.locals)},584:function(e,t,i){e.exports=i.p+"static/img/iphone.fe1e366.png"},595:function(e,t,i){i(568);var a=i(5)(i(245),i(646),"data-v-7079e4fe",null);e.exports=a.exports},646:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("el-col",{staticClass:"toolbar",attrs:{span:24}},[i("el-tabs",{staticStyle:{"padding-bottom":"20px"},attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-popover",{ref:"popoverF",attrs:{placement:"right",width:"400",trigger:"click"}},[i("el-upload",{attrs:{action:"","file-list":e.filelist,"http-request":e.handleRequestOss,"list-type":"picture","on-change":e.handlechange,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.getUpstr}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e._v(" "),i("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),i("el-popover",{ref:"popoverT",attrs:{placement:"right",width:"400",trigger:"click"}},[i("el-upload",{attrs:{action:"","file-list":e.filelist1,"http-request":e.handleRequestOssBanner,"list-type":"picture-card","on-remove":e.handleRemoveBanner,"on-success":e.getUpstr}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),i("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.editFormRules}},[i("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"20px"}},[i("div",{staticClass:"clearfix",slot:"header"},[i("span",{staticStyle:{"line-height":"20px"}},[e._v("基本信息")])]),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"商品名称",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"国际条形码",prop:"code"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.code,callback:function(t){e.form.code=t},expression:"form.code"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"原产地",prop:"production_origin"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.production_origin,callback:function(t){e.form.production_origin=t},expression:"form.production_origin"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"生产厂家",prop:"manufacturer"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.manufacturer,callback:function(t){e.form.manufacturer=t},expression:"form.manufacturer"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"数量"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.num,callback:function(t){e.form.num=t},expression:"form.num"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"计价方式"}},[i("el-select",{attrs:{placeholder:"请选择计价方式"},model:{value:e.form.valuation_id,callback:function(t){e.form.valuation_id=t},expression:"form.valuation_id"}},[i("el-option",{attrs:{label:"称重",value:1}}),e._v(" "),i("el-option",{attrs:{label:"计价",value:0}})],1)],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"零售单位"}},[i("el-select",{attrs:{placeholder:"请选择零售单位"},model:{value:e.form.retail_unit_id,callback:function(t){e.form.retail_unit_id=t},expression:"form.retail_unit_id"}},[i("el-option",{attrs:{label:"称重",value:1}}),e._v(" "),i("el-option",{attrs:{label:"计价",value:0}})],1)],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"分类"}},[i("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.goods_type_id,callback:function(t){e.form.goods_type_id=t},expression:"form.goods_type_id"}},[i("el-option",{attrs:{label:"称重",value:1}}),e._v(" "),i("el-option",{attrs:{label:"计价",value:0}})],1)],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"品牌"}},[i("el-select",{attrs:{placeholder:"请选择品牌"},model:{value:e.form.goods_brand_id,callback:function(t){e.form.goods_brand_id=t},expression:"form.goods_brand_id"}},[i("el-option",{attrs:{label:"称重",value:1}}),e._v(" "),i("el-option",{attrs:{label:"计价",value:0}})],1)],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"供应商"}},[i("el-select",{attrs:{placeholder:"请选择供应商"},model:{value:e.form.supplier_id,callback:function(t){e.form.supplier_id=t},expression:"form.supplier_id"}},[i("el-option",{attrs:{label:"称重",value:1}}),e._v(" "),i("el-option",{attrs:{label:"计价",value:0}})],1)],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"是否分润"}},[i("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","on-value":"1","off-value":"0"},model:{value:e.form.is_rebate,callback:function(t){e.form.is_rebate=t},expression:"form.is_rebate"}})],1)],1),e._v(" "),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",slot:"header"},[i("span",{staticStyle:{"line-height":"20px"}},[e._v("价格信息")])]),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"进货价",prop:"buying_price"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.buying_price,callback:function(t){e.form.buying_price=t},expression:"form.buying_price"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"批发价",prop:"trade_price"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.trade_price,callback:function(t){e.form.trade_price=t},expression:"form.trade_price"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"零售价",prop:"retail_price"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.retail_price,callback:function(t){e.form.retail_price=t},expression:"form.retail_price"}})],1),e._v(" "),i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"市场价",prop:"market_price"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.market_price,callback:function(t){e.form.market_price=t},expression:"form.market_price"}})],1)],1)],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"商品详情",name:"second"}},[i("div",{staticClass:"phoneBg",staticStyle:{padding:"18px","padding-top":"32px",width:"284px",height:"600px",position:"relative"}},[i("el-carousel",{attrs:{"indicator-position":"outside",width:"300px",height:"200px"}},e._l(e.pic,function(e){return i("el-carousel-item",{key:e},[i("img",{attrs:{src:e,width:"100%"}})])})),e._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverT",arg:"popoverT"}],staticStyle:{width:"284px",height:"200px",overflow:"hidden",position:"absolute",border:"none",top:"32px","z-index":"100",opacity:"0"},on:{click:e.test}}),e._v(" "),i("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverF",arg:"popoverF"}],staticStyle:{width:"100%",height:"300px",overflow:"auto","margin-left":"-1px"},attrs:{id:"imageContent"}},[i("div",{domProps:{innerHTML:e._s(e.editForm.content)}}),e._v(" "),e._l(e.picContent,function(t){return i("div",{key:t,staticClass:"img-single",staticStyle:{width:"100%"}},[i("div",{staticClass:"deleteAvata",staticStyle:{display:"none"}},[e._v("删除")]),e._v(" "),i("img",{attrs:{src:"http://enclosure.wandlm.net/web_pic/2017/01/09/1483941258379.png",src:t,width:"100%"}})])})],2)],1),e._v(" "),i("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[i("el-form-item",{staticStyle:{display:"inline-block",margin:"10px",width:"30%","min-width":"200px"},attrs:{label:"是否上架"}},[i("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949","on-value":"1","off-value":"0"},model:{value:e.editForm.status,callback:function(t){e.editForm.status=t},expression:"editForm.status"}})],1),e._v(" "),i("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"备注"}},[i("el-input",{attrs:{type:"area"},model:{value:e.editForm.note,callback:function(t){e.editForm.note=t},expression:"editForm.note"}})],1),e._v(" "),i("el-form-item",[i("el-input",{attrs:{type:"hidden"},model:{value:e.editForm.pic,callback:function(t){e.editForm.pic=t},expression:"editForm.pic"}}),e._v(" "),i("el-input",{attrs:{type:"hidden"},model:{value:e.editForm.content,callback:function(t){e.editForm.content=t},expression:"editForm.content"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{loading:e.editLoading,type:"primary"},on:{click:e.editSubmit}},[e._v(e._s(e.btnEditText))]),e._v(" "),i("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.returnShop(t)}}},[e._v("取消")])],1)],1)],1)],1)],1),e._v(" "),void 0],2)},staticRenderFns:[]}}});
//# sourceMappingURL=2.c929a39ef923b4c187a8.js.map